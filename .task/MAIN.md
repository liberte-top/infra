# Task: 增加 kubectl 统一调用脚本

- **Branch:** feat/add-kubeconfig-smoke-check
- **Status:** Active
- **Last-Sync:** 2026-02-25T08:45:57Z (on ZQXY123deMacBook-Pro.local)
- **Current Context:** WIP checkpoint prepared for next session; pending decision is strict-fail vs auto-reconcile for kubeconfig tailscale endpoint mismatch.

## Phase Stack
> Current execution depth (Top is active)
  - 1.1: Kubectl Unified Script

## Timeline
- [2026-02-25T08:32:08Z] INITIALIZED: Task started on ZQXY123deMacBook-Pro.local.
- [2026-02-25T08:32:08Z] PHASE PUSH: Begin Phase 1.1 (add kubectl unified script + AGENTS command reference).
- [2026-02-25T08:32:51Z] UPDATE: Created .task from ~/.agent-task/templates and initialized Phase 1.1 records.
- [2026-02-25T08:34:38Z] UPDATE: Scope narrowed by user to `scripts/kubectl.sh` only; removed standalone smoke script direction.
- [2026-02-25T08:38:09Z] UPDATE: Added `scripts/kubectl.sh` with kubeconfig defaulting and remote kubectl passthrough via ssh.sh.
- [2026-02-25T08:38:09Z] UPDATE: Updated AGENTS common commands and validated default run (`kubectl get nodes`) successfully.
- [2026-02-25T08:40:54Z] UPDATE: Updated kubectl.sh to enforce tailscale kubeconfig server endpoint before execution.
- [2026-02-25T08:40:54Z] UPDATE: Validation now fails by design: expected `https://43.251.225.184:6443`, actual is `https://127.0.0.1:6443`.
- [2026-02-25T08:45:57Z] UPDATE: Session handoff checkpoint: `scripts/kubectl.sh` implemented and blocking correctly on endpoint mismatch; next step is to confirm remediation strategy with user.

## Global References
- **Docs:** .task/MAIN.md
- **Scripts:** scripts/kubectl.sh
- **Assets:** N/A
---
*Generated by .task Convention - Synchronized via Git*
